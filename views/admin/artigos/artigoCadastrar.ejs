<%- include('../../partials/admin/header.ejs') %>
<main class="principal container">
  <hgroup>
    <h2>Artigos</h2>
    <h3>Criar novo artigo</h3>
  </hgroup>
  <hr class="horizontal-bar">
  <form class="form-cadastro" method="POST" action="/admin/artigo/salvarNovo">
    <label>Título:</label>
    <% if (erros.tituloError) { %>
      <p>
        <small class="msgAlert"><%= erros.tituloError %></small>
      </p>
    <% } %>
    <% if (dados.titulo.length != 0) { %>
      <input type="text" name="iptTitulo" class="br-7" placeholder="Título do artigo" value="<%= dados.titulo %>">
    <% } else { %>
      <input type="text" name="iptTitulo" class="br-7" placeholder="Título do artigo">
    <% } %>

    <label>Categoria:</label>
    <% if (erros.categoriaError) { %>
      <p>
        <small class="msgAlert"><%= erros.categoriaError %></small>
      </p>
    <% } %>
    <select name="iptCategoria" class="br-7">
      <% table_categorias.forEach(categoria => { %>
        <% if (categoria.id == dados.categoria) { %>
          <option value="<%= categoria.id %>" seleted><%= categoria.categoria %></option>
        <% } else { %>
          <option value="<%= categoria.id %>"><%= categoria.categoria %></option>
        <% } %>
      <% }) %>
    </select>

    <label>Autor:</label>
    <% if (erros.autorError) { %>
      <p>
        <small class="msgAlert"><%= erros.autorError %></small>
      </p>
    <% } %>
    <select name="iptAutor" class="br-7">
      <% table_funcionarios.forEach(funcionario => { %>
        <% if (funcionario.id == dados.funcionario) { %>
          <option value="<%= funcionario.id %>" seleted><%= funcionario.nome %></option>
        <% } else { %>
          <option value="<%= funcionario.id %>"><%= funcionario.nome %></option>
        <% } %>
      <% }) %>
    </select>

    <label>Status:</label>
    <% if (erros.statusError) { %>
      <p>
        <small class="msgAlert"><%= erros.statusError %></small>
      </p>
    <% } %>
    <select name="iptStatus" class="br-7">
      <% table_status_artigos.forEach(status => { %>
        <% if (status.id) { %>
          <option value="<%= status.id %>" seleted><%= status.status_artigo %></option>
        <% } else { %>
          <option value="<%= status.id %>"><%= status.status_artigo %></option>
        <% } %>
      <% }) %>
    </select>

    <label>Artigo:</label>
    <% if (erros.artigoError) { %>
      <p>
        <small class="msgAlert"><%= erros.artigoError %></small>
      </p>
    <% } %>
    <% if (dados.artigo.length != 0) { %>
      <textarea id="txtArtigo" name="txtArtigo"><%= dados.artigo %></textarea>
    <% } else { %>
      <textarea id="txtArtigo" name="txtArtigo"></textarea>
    <% } %>

    <button type="submit" class="btn btn-add btn-right">Cadastrar</button>
  </form>
</main>
<script type="text/javascript" src="/tinymce/tinymce.min.js"></script>
<script type="text/javascript" src="/js/tinyMCE_config.js"></script>
<%- include('../../partials/admin/footer.ejs') %>